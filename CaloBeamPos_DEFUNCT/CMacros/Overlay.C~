void DrawGraphs(std::vector<TGraphErrors*> graphs, std::vector<string> names, std::string title, std::string fname, double ymin, double ymax ) {

  TCanvas *c = new TCanvas("c","c",800,600);

  TLegend *l = new TLegend(0.11,0.69,0.60,0.89);
  //l->SetNColumns(3);
  l->SetBorderSize(0);

  graphs.at(0)->SetTitle(title.c_str());
  graphs.at(0)->GetXaxis()->SetTitleSize(.04);
  graphs.at(0)->GetYaxis()->SetTitleSize(.04);
  graphs.at(0)->GetXaxis()->SetTitleOffset(1.1);
  graphs.at(0)->GetYaxis()->SetTitleOffset(1.1);
  graphs.at(0)->GetXaxis()->CenterTitle(true);
  graphs.at(0)->GetYaxis()->CenterTitle(true);
  graphs.at(0)->GetYaxis()->SetMaxDigits(4);
  graphs.at(0)->GetYaxis()->SetRangeUser(ymin,ymax);

  // Hack together x-axis range
  //int N = graphs.at(0)->GetN();
  //double xmax = graphs.at(0)->GetPointX(N-1);// + 50;
  //double xmin = graphs.at(0)->GetPointX(0);// - 50; 
  //double offset = (xmax - xmin) * 0.05;
  //xmin = xmin - offset; 
  //xmax = xmax + offset;

  //graphs.at(0)->GetXaxis()->SetRangeUser(xmin, xmax);

  int nGraphs = graphs.size();

  graphs.at(0)->SetMarkerStyle(20);
  graphs.at(1)->SetMarkerStyle(24);
  // graphs.at(2)->SetMarkerColor(kRed);

  for(int i = 0; i < nGraphs; i++) {
    //graphs.at(i)->SetMarkerStyle(20);
    l->AddEntry(graphs.at(i), (names.at(i)).c_str());
    if(i==0) graphs.at(i)->Draw("AP");
    else graphs.at(i)->Draw("P SAME");
  }

  l->Draw("same");
  c->SaveAs((fname+".pdf").c_str());
  c->SaveAs((fname+".png").c_str());
  c->SaveAs((fname+".C").c_str());

  delete c;

  return;

}


void Overlay() { 
	
	TFile *fin1 = TFile::Open("../Plots/CaloBeamPosVsRun_60h_15921_15991.root");
	TFile *fin2 = TFile::Open("../Plots/CaloBeamPos_NewCutsVsRun_60h_15921_15991.root");

	TGraphErrors *gr1 = (TGraphErrors*)fin1->Get("CaloAverage/gr");
	TGraphErrors *gr2 = (TGraphErrors*)fin2->Get("CaloAverage/gr");

	vector<TGraphErrors*> gr_; 
	gr_.push_back(gr1); gr_.push_back(gr2);
	
	vector<string> names_;
	names_.push_back("t < 24 #mus, 1700 < E [MeV] < 6000 MeV"); names_.push_back("t < 30 #mus, 500 < E [MeV] < 6000 MeV");
	
	DrawGraphs(gr_, names_, ";Run number;#LTy_{calo}#GT [mm]", "../Images/60h_overlay", 75.3, 76);
	

	return;

}
